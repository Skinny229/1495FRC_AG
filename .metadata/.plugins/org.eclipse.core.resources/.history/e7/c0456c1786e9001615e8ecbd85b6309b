package org.usfirst.frc.team1495.robot;

import edu.wpi.cscore.MjpegServer;
import edu.wpi.cscore.UsbCamera;
import edu.wpi.cscore.VideoSource;

public class VisionClass {

	Thread visionThread;
	MjpegServer camServer;
	VideoSource camera0,camera1;
	
	public VisionClass(){
		visionThread = new Thread(() -> {
			camServer = new MjpegServer(RobotMap.MJPEG_SERVERNAME, RobotMap.MJPEG_PORT);
			camera0 = new UsbCamera(RobotMap.USB_CAM[0],RobotMap.USB_CAM[1]);
			camera1 = new UsbCamera(RobotMap.USB_CAM1[0], RobotMap.USB_CAM1[1]);
			camServer.setSource(camera0);
		});
		
		startVision();
	}
	
	public void startVision(){
		visionThread.setDaemon(true);
		visionThread.start();
	}
	public boolean updateVisionState(){
		return visionThread.isAlive();
	}
	public void setCameraSource(int cameraNum){
		switch(cameraNum){
		case 0: camServer.setSource(camera0);
			break;	
		case 1: camServer.setSource(camera1);
			break;
		default: 
			break;
		}
	}
	
	public void cameraChangeMsg(int camOn){
		System.out.println("Streamer set on Camera" + camOn);
	}
}
